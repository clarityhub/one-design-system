{"version":3,"sources":["webpack:///./packages/unity-web/src/utilities/position.js","webpack:///./packages/unity-web/src/components/Menu/MenuPopover.js","webpack:///./packages/unity-web/src/components/Menu/MenuPortal.js","webpack:///./packages/unity-web/src/components/Menu/Menu.js","webpack:///./packages/unity-web/src/components/Menu/MenuItem.js","webpack:///./packages/unity-web/src/components/Menu/MenuItemDivider.js","webpack:///./packages/unity-web/src/components/Menu/index.js"],"names":["offset","el","rect","getBoundingClientRect","scrollLeft","window","pageXOffset","document","documentElement","scrollTop","pageYOffset","styles","defaultView","getComputedStyle","marginTop","parseFloat","getPropertyValue","marginBottom","top","left","height","outerHeight","width","bottom","right","noOverflow","position","w","innerWidth","newPosition","_objectSpread","menuPopoverWrapper","css","colors","white","default","borders","borderRadius","rem","shadow","variants","button","string","Arrow","Object","styled_base_browser_esm","target","MenuPopover","arrow","props","pos","MenuPopover_objectSpread","menuPosition","targetPos","Component","this","getPosition","popover","setState","getArrowPosition","nextProps","_this2","_this$state","state","_this$props","items","innerRef","core_browser_esm","ref","style","concat","map","item","i","key","React","forwardRef","MenuPopover_MenuPopover","assign","menuPortalId","MenuPortal","_this","MenuPortal_classCallCheck","MenuPortal_possibleConstructorReturn","MenuPortal_getPrototypeOf","call","createElement","id","body","appendChild","removeChild","ReactDOM","createPortal","children","MenuWrapper","name","MenuTarget","Menu","open","e","menu","doneOpening","contains","close","_ref","setTimeout","_onClickOutside","onClickOutside","bind","_onKeyUp","onKeyUp","addEventListener","removeEventListener","MenuPortal_MenuPortal","Menu_MenuPopover","MenuItem","Buttons","text","muted","MenuItemDivider","gray","__webpack_require__","d","__webpack_exports__","Menu_Menu","Menu_MenuItem","Menu_MenuItemDivider"],"mappings":"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","file":"static/js/packages-unity-web-src-components-menu-menu~packages-unity-web-src-components-navbar-navbar~packages~23c8c4a5.8fbacd74.js","sourcesContent":["/**\n * Given an element, get the top, left, bottom, right, height, and width.\n */\nexport const offset = (el) => {\n\tconst rect = el.getBoundingClientRect();\n\tconst scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n\tconst scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\n\tconst styles = document.defaultView.getComputedStyle(el, '');\n\tconst marginTop = parseFloat(styles.getPropertyValue('margin-top'));\n\tconst marginBottom = parseFloat(styles.getPropertyValue('margin-bottom'));\n\n\treturn {\n\t\ttop: rect.top + scrollTop,\n\t\tleft: rect.left + scrollLeft,\n\t\theight: rect.height,\n\t\touterHeight: marginTop + marginBottom + rect.height,\n\t\twidth: rect.width,\n\t\tbottom: rect.top + scrollTop + rect.height,\n\t\tright: rect.left + scrollLeft + rect.width,\n\t};\n};\n\n/**\n * Given a position, and an element, make sure that\n * the element at that position will not overflow with\n * the window.\n */\nexport const noOverflow = (position, el) => {\n\tconst w = window.innerWidth;\n\tconst rect = el.getBoundingClientRect();\n\tconst newPosition = { ...position };\n\n\tif (position.left + rect.width > w) {\n\t\t// snap to right\n\t\tnewPosition.left = position.right - rect.width;\n\t}\n\n\treturn newPosition;\n};","/** @jsx jsx */\n\nimport React, { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\nimport styled from '@emotion/styled';\nimport { arrayOf, node } from 'prop-types';\nimport { variants } from '@clarityhub/unity-core/lib/typography';\nimport borders from '@clarityhub/unity-core/lib/borders';\nimport colors from '@clarityhub/unity-core/lib/colors';\n\nimport { offset, noOverflow } from '../../utilities/position';\n\nconst menuPopoverWrapper = () => css`\n    background-color: ${colors.white.default};\n    border-radius: ${borders.borderRadius.rem}rem;\n    box-shadow: ${colors.shadow.default};\n    position: absolute;\n    z-index: 99999999;\n    margin-top: 1rem;\n    min-width: 13rem;\n    padding: 0.4rem 0;\n\n    ${variants.button.string}\n\n    font-size: 1rem;\n\n    ul {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n    }\n\n    li {\n        margin: 0;\n        padding: 0;\n    }\n`;\n\nconst Arrow = styled.div`\n    position: absolute;\n    width: 0; \n    height: 0; \n    border-left: 0.5rem solid transparent;\n    border-right: 0.5rem solid transparent;\n    border-bottom: 0.5rem solid ${colors.white.default};\n    top: -0.5rem;\n    transform: translateX(-50%);\n`;\n\nclass MenuPopover extends Component {\n    static propTypes = {\n    \titems: arrayOf(node).isRequired,\n    \ttarget: node,\n    }\n\n    state = {\n    \tposition: {},\n    \tarrow: {},\n    }\n\n    componentDidMount() {\n    \tconst position = this.getPosition(this.props, this.popover);\n    \tthis.setState({\n    \t\tposition,\n    \t\tarrow: this.getArrowPosition(this.props, position),\n    \t});\n    }\n\n    componentWillUpdate(nextProps) {\n    \tif (nextProps.left !== this.props.left ||\n            nextProps.target !== this.props.target) {\n            \n    \t\tconst position = this.getPosition(nextProps, this.popover);\n    \t\tthis.setState({\n    \t\t\tposition,\n    \t\t\tarrow: this.getArrowPosition(nextProps, position),\n    \t\t});\n    \t}\n    }\n\n    getPosition = (props, el) => {\n    \tlet pos = { ...props.position };\n    \tif (el) {\n    \t\t// Try to center\n    \t\tpos.left = pos.left - (offset(el).width / 2) + (offset(props.target).width / 2);\n    \t}\n\n    \t// Push over if it would go off the page\n    \treturn noOverflow(pos, el);\n    }\n\n    getArrowPosition = (props, menuPosition) => {\n    \tif (props.target) {\n    \t\tconst targetPos = offset(props.target);\n\n    \t\tconst left = targetPos.left - menuPosition.left + (targetPos.width / 2);\n\n    \t\treturn {\n    \t\t\ttop: 0,\n    \t\t\tleft,\n    \t\t};\n    \t} else {\n    \t\treturn {\n    \t\t\ttop: 0,\n    \t\t\tleft: 0,\n    \t\t};\n    \t}\n    }\n\n    render() {\n    \tconst { position, arrow } = this.state;\n    \tconst { items, innerRef } = this.props;\n\n    \treturn (\n    \t\t<div\n    \t\t\tref={(ref) => { this.popover = ref; innerRef(ref);}}\n    \t\t\tcss={menuPopoverWrapper}\n    \t\t\tstyle={{\n    \t\t\t\ttop: `${position.bottom || 0}px`,\n    \t\t\t\tleft: `${position.left || 0}px`,\n    \t\t\t}}\n    \t\t>\n    \t\t\t<Arrow\n    \t\t\t\tstyle={{\n    \t\t\t\t\tleft: `${arrow.left || 0}px`,\n    \t\t\t\t}}\n    \t\t\t/>\n    \t\t\t<ul>\n    \t\t\t\t{items.map((item, i) => (\n    \t\t\t\t\t<li key={i}>\n    \t\t\t\t\t\t{item}\n    \t\t\t\t\t</li>\n    \t\t\t\t))}\n    \t\t\t</ul>\n    \t\t</div>\n    \t);\n    }\n}\n\nexport default React.forwardRef((props, ref) => <MenuPopover innerRef={ref} {...props} />);\n","import { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nlet menuPortalId = 0;\n\nexport default class MenuPortal extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tif (typeof window !== 'undefined') {\n\t\t\tthis.el = document.createElement('div');\n\t\t\tthis.el.id = `menu-portal-${menuPortalId++}`;\n\t\t\tdocument.body.appendChild(this.el);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (this.el) {\n\t\t\tdocument.body.removeChild(this.el);\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.el) {\n\t\t\treturn ReactDOM.createPortal(\n\t\t\t\tthis.props.children,\n\t\t\t\tthis.el\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t}\n}","/** @jsx jsx */\n\nimport { Component } from 'react';\nimport { func, node, arrayOf } from 'prop-types';\nimport styled from '@emotion/styled';\nimport { jsx } from '@emotion/core';\n\nimport { offset } from '../../utilities/position';\nimport MenuPopover from './MenuPopover';\nimport MenuPortal from './MenuPortal';\n\nconst MenuWrapper = styled.div`\n    position: relative;\n`;\n\nconst MenuTarget = styled.div`\n    position: relative;\n`;\n\n/**\n * When you click on the {children} wrapper,\n * a menu will appear below the {children}'s position.\n * \n * The menu's position will remain within the window.\n * \n * The menu will close when you click outside of the menu\n */\nexport default class Menu extends Component {\n    static propTypes = {\n    \tchildren: func.isRequired,\n    \titems: arrayOf(node).isRequired,\n    }\n\n    state = {\n    \topen: false,\n    }\n\n    componentDidMount() {\n    \tthis._onClickOutside = this.onClickOutside.bind(this);\n    \tthis._onKeyUp = this.onKeyUp.bind(this);\n\n    \tdocument.addEventListener('click', this._onClickOutside);\n    \tdocument.addEventListener('keyup', this._onKeyUp);\n    }\n\n    componentWillUnmount() {\n    \tdocument.removeEventListener('click', this._onClickOutside);\n    \tdocument.removeEventListener('keyup', this._onKeyUp);\n    }\n\n    onClickOutside = (e) => {\n    \tif (this.menu && this.doneOpening) {        \n    \t\tif (this.state.open) {\n    \t\t\tconst target = e.target;\n    \t\t\t// check if target is within (or is) the menu\n    \t\t\tconst clickOutsideMenu = this.menu !== target && !this.menu.contains(target);\n    \t\t\tif (clickOutsideMenu) {\n    \t\t\t\tthis.close();\n    \t\t\t}\n    \t\t}\n    \t}\n    }\n\n    onKeyUp = (e) => {\n    \tif (this.state.open) {\n    \t\tif (e.key === 'Escape') {\n    \t\t\tthis.close();\n    \t\t}\n    \t}\n    }\n\n    open = () => {\n    \tthis.doneOpening = false;\n\n    \tlet position = {\n    \t\ttop: 0,\n    \t\tleft: 0,\n    \t};\n\n    \tif (this.target) {\n    \t\tposition = offset(this.target);\n    \t}\n\n    \tthis.setState(({ open }) => ({\n    \t\topen: !open,\n    \t\tposition,\n    \t}), () => {\n    \t\tsetTimeout(() => {\n    \t\t\tthis.doneOpening = true;\n    \t\t}, 100);\n    \t});\n    }\n\n    close = () => {\n    \tthis.setState({\n    \t\topen: false,\n    \t});\n    }\n\n    render() {\n    \tconst { children, items } = this.props;\n    \tconst { open, position } = this.state;\n\n    \treturn (\n    \t\t<MenuWrapper>\n    \t\t\t{open && (\n    \t\t\t\t<MenuPortal>\n    \t\t\t\t\t<MenuPopover\n    \t\t\t\t\t\tref={ref => this.menu = ref}\n    \t\t\t\t\t\titems={items}\n    \t\t\t\t\t\tposition={position}\n    \t\t\t\t\t\ttarget={this.target}\n    \t\t\t\t\t/>\n    \t\t\t\t</MenuPortal>\n    \t\t\t)}\n\n    \t\t\t<MenuTarget ref={ref => this.target = ref}>\n    \t\t\t\t{children({\n    \t\t\t\t\topen: this.open,\n    \t\t\t\t})}\n    \t\t\t</MenuTarget>\n    \t\t</MenuWrapper>\n    \t);\n    }\n}\n","/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport colors from '@clarityhub/unity-core/lib/colors';\n\nimport Button from '../Buttons';\n\nconst MenuItem = props => (\n\t<Button\n\t\ttext\n\t\tcss={css`\n            border-radius: 0;\n            text-align: left;\n            text-transform: none;\n            min-width: 150px;\n            width: 100%;\n\n            &:hover {\n                background-color: ${colors.muted.default};\n            }\n        `}\n\t\t{...props}\n\t/>\n);\n\nexport default MenuItem;\n","import styled from '@emotion/styled';\nimport colors from '@clarityhub/unity-core/lib/colors';\n\nconst MenuItemDivider = styled.hr`\n    width: 100%;\n    height: 0;\n    border-top: 1px solid ${colors.gray.default};\n`;\n\nexport default MenuItemDivider;\n","export { default as Menu } from './Menu';\nexport { default as MenuItem } from './MenuItem';\nexport { default as MenuItemDivider } from './MenuItemDivider';\n\n"],"sourceRoot":""}